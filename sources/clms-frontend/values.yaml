image:
  repository: eeacms/clms-frontend
  pullPolicy: Always
  tag: ""

imagePullSecrets: []

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: false
  annotations: {}
  name: ""

timezone: Europe/Copenhagen

links:
  backend: backend-varnish.clms

ingress:
  annotations:
    cert-manager.io/cluster-issuer: 01dev-eea-letsencrypt
    nginx.ingress.kubernetes.io/configuration-snippet: |-
      more_set_headers 'Server HTTPS'
        'Strict-Transport-Security max-age=31536000; includeSubDomains; preload'
        "Expect-CT max-age=604800, report-uri='https://sentry.eea.europa.eu/api/45/security/?sentry_key=0343e20fc4e0469790b6016561f032e3'"
        'X-Content-Type-Options nosniff'
        'X-XSS-Protection "1; mode=block"'
        "X-Frame-Options 'SAMEORIGIN'"
        "Referrer-Policy origin"
        'Permissions-Policy accelerometer=(), autoplay=(), camera=(), encrypted-media=(), fullscreen=(self), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), midi=(), payment=(), picture-in-picture=(), sync-xhr=(self), usb=()';
    nginx.ingress.kubernetes.io/proxy-body-size: 1024m
    nginx.ingress.kubernetes.io/proxy-read-timeout: '480'
    nginx.ingress.kubernetes.io/proxy-send-timeout: '120'
  certificate: dev-clms.copernicus.01dev.eea.europa.eu-tls
  tls: enabled
  # Server snippet for nginx redirects (converted from Apache RewriteRules)
  serverSnippet: |
    # SEO Redirects
    rewrite ^/@@search(.*)$ /en/global-search permanent;
    rewrite ^/about$ /en/about-us permanent;
    rewrite ^/contact$ /en/contact-service-helpdesk permanent;
    rewrite ^/contact-form$ /en/contact-service-helpdesk permanent;
    rewrite ^/copernicus-the-european-earth-observation-programme$ /en/about-us permanent;
    rewrite ^/dashboards/(.*)$ /en permanent;
    rewrite ^/eagle$ /en/eagle permanent;
    rewrite ^/eagle(.*)$ /en/eagle permanent;
    rewrite ^/faq$ /en/faq permanent;
    rewrite ^/faq(.*)$ /en/faq permanent;
    rewrite ^/imagery-in-situ$ /en/products?tab=explore permanent;
    rewrite ^/imagery-in-situ/$ /en/products?tab=explore permanent;
    rewrite ^/imagery-in-situ/eu-hydro(.*)$ /en/products/eu-hydro permanent;
    rewrite ^/imagery-in-situ/european-image-mosaics(.*)$ /en/products/european-image-mosaic permanent;
    rewrite ^/imagery-in-situ/eu-dem(.*)$ /en/products/products-that-are-no-longer-disseminated-on-the-clms-website permanent;
    rewrite ^/imagery-in-situ/global-image-mosaics(.*)$ /en/products/global-image-mosaic permanent;
    rewrite ^/local$ /en/products?tab=explore permanent;
    rewrite ^/local/$ /en/products?tab=explore permanent;
    rewrite ^/local/coastal-zones(.*)$ /en/products/coastal-zones permanent;
    rewrite ^/local/natura(.*)$ /en/products/n2k permanent;
    rewrite ^/local/riparian-zones(.*)$ /en/products/riparian-zones permanent;
    rewrite ^/local/urban-atlas$ /en/products/urban-atlas permanent;
    rewrite ^/local/urban-atlas/$ /en/products/urban-atlas permanent;
    rewrite ^/local/urban-atlas/building-height-2012(.*)$ /en/products/urban-atlas/building-height-2012 permanent;
    rewrite ^/local/urban-atlas/street-tree-layer-stl-2018(.*)$ /en/products/urban-atlas/street-tree-layer-stl-2018 permanent;
    rewrite ^/local/urban-atlas/street-tree-layer-stl(.*)$ /en/products/urban-atlas/street-tree-layer-stl-2012 permanent;
    rewrite ^/local/urban-atlas/urban-atlas-2006(.*)$ /en/products/urban-atlas/urban-atlas-2006 permanent;
    rewrite ^/local/urban-atlas/urban-atlas-2012(.*)$ /en/products/urban-atlas/urban-atlas-2012 permanent;
    rewrite ^/local/urban-atlas/urban-atlas-2018(.*)$ /en/products/urban-atlas/urban-atlas-2018 permanent;
    rewrite ^/local/urban-atlas/urban-atlas-change-2012-2018(.*)$ /en/products/urban-atlas/urban-atlas-change-2012-2018 permanent;
    rewrite ^/local/urban-atlas/change-2006-2009(.*)$ /en/products/urban-atlas/urban-atlas-change-2006-2012 permanent;
    rewrite ^/local/urban-atlas/view$ /en/map-viewer?product=aefa4d1bc3ad425e97e93715af6551ac permanent;
    rewrite ^/looking-for-national-products$ /en/products?tab=explore permanent;
    rewrite ^/news(.*)$ /en/news permanent;
    rewrite ^/pan$ /en/products?tab=explore permanent;
    rewrite ^/pan-european$ /en/products?tab=explore permanent;
    rewrite ^/pan-european/$ /en/products?tab=explore permanent;
    rewrite ^/pan-european/biophysical-parameters(.*)$ /en/products?tab=explore permanent;
    rewrite ^/pan-european/biophysical-parameters/high-resolution-snow-and-ice-monitoring(.*)$ /en/products/snow permanent;
    rewrite ^/pan-european/biophysical-parameters/high-resolution-vegetation-phenology-and-productivity(.*)$ /en/products/vegetation permanent;
    rewrite ^/pan-european/clc-plus(.*)$ /en/products/clc-backbone permanent;
    rewrite ^/pan-european/corine-land-cover$ /en/products/corine-land-cover permanent;
    rewrite ^/pan-european/corine-land-cover/$ /en/products/corine-land-cover permanent;
    rewrite ^/pan-european/corine-land-cover/clc-1990(.*)$ /en/products/corine-land-cover/clc-1990 permanent;
    rewrite ^/pan-european/corine-land-cover/clc-2000(.*)$ /en/products/corine-land-cover/clc-2000 permanent;
    rewrite ^/pan-european/corine-land-cover/clc-2006(.*)$ /en/products/corine-land-cover/clc-2006 permanent;
    rewrite ^/pan-european/corine-land-cover/clc-2012(.*)$ /en/products/corine-land-cover/clc-2012 permanent;
    rewrite ^/pan-european/corine-land-cover/clc2018(.*)$ /en/products/corine-land-cover/clc2018 permanent;
    rewrite ^/pan-european/corine-land-cover/clc2012(.*)$ /en/products/corine-land-cover/clc-2012 permanent;
    rewrite ^/pan-european/corine-land-cover/lcc-1990-2000(.*)$ /en/products/corine-land-cover/cha-1990-2000 permanent;
    rewrite ^/pan-european/corine-land-cover/lcc-2000-2006(.*)$ /en/products/corine-land-cover/cha-2000-2006 permanent;
    rewrite ^/pan-european/corine-land-cover/lcc-2006-2012(.*)$ /en/products/corine-land-cover/cha-2006-2012 permanent;
    rewrite ^/pan-european/corine-land-cover/lcc-2012-2018(.*)$ /en/products/corine-land-cover/lcc-2012-2018 permanent;
    rewrite ^/pan-european/corine-land-cover/view$ /en/map-viewer?product=130299ac96e54c30a12edd575eff80f7 permanent;
    rewrite ^/pan-european/corine-land-cover(.*)$ /en/products/corine-land-cover permanent;
    rewrite ^/pan-european/corineland-cover(.*)$ /en/products/corine-land-cover permanent;
    rewrite ^/pan-european/corine-landcover(.*)$ /en/products/corine-land-cover permanent;
    rewrite ^/pan-european/european-ground-motion-service(.*)$ /en/products/european-ground-motion-service permanent;
    rewrite ^/pan-european/GHSL(.*)$ /en/products/products-that-are-no-longer-disseminated-on-the-clms-website permanent;
    rewrite ^/pan-european/high-resolution-layers$ /en/products?tab=explore permanent;
    rewrite ^/pan-european/high-resolution-layers/$ /en/products?tab=explore permanent;
    rewrite ^/pan-european/high-resolution-layers/forests/dominant-leaf-type(.*)$ /en/products/high-resolution-layer-dominant-leaf-type permanent;
    rewrite ^/pan-european/high-resolution-layers/forests/forest-type(.*)$ /en/products/high-resolution-layer-forest-type permanent;
    rewrite ^/pan-european/high-resolution-layers/forests/tree-cover-density(.*)$ /en/products/high-resolution-layer-tree-cover-density permanent;
    rewrite ^/pan-european/high-resolution-layers/forests(.*)$ /en/products/high-resolution-layer-forest-type permanent;
    rewrite ^/pan-european/high-resolution-layers/grassland(.*)$ /en/products/high-resolution-layer-grassland permanent;
    rewrite ^/pan-european/high-resolution-layers/imperviousness(.*)$ /en/products/high-resolution-layer-imperviousness permanent;
    rewrite ^/pan-european/high-resolution-layers/small-woody-features(.*)$ /en/products/high-resolution-layer-small-woody-features permanent;
    rewrite ^/pan-european/high-resolution-layers/water-wetness(.*)$ /en/products/high-resolution-layer-water-and-wetness permanent;
    rewrite ^/pan-european/high-resolution-layers/permanent-water-bodies(.*)$ /en/products/high-resolution-layer-water-and-wetness permanent;
    rewrite ^/pan-european/high-resolution-layers/wetlands(.*)$ /en/products/high-resolution-layer-water-and-wetness permanent;
    rewrite ^/pan-european/high-resolution-layers/view$ /en/products?tab=explore permanent;
    rewrite ^/pan-european/high-resolution-layers(.*)$ /en/products?tab=explore permanent;
    rewrite ^/pan-european/high-resolution-image-mosaic(.*)$ /en/products/european-image-mosaic permanent;
    rewrite ^/pan-european/satellite-derived-products/eu-hydro(.*)$ /en/products/eu-hydro permanent;
    rewrite ^/pan-european/satellite-derived-products(.*)$ /en/products?tab=explore permanent;
    rewrite ^/paneuropean/corine-land-cover$ /en/products/corine-land-cover permanent;
    rewrite ^/paneuropean/corine-land-cover/clc2018$ /en/products/corine-land-cover/clc2018 permanent;
    rewrite ^/paneuropean/corine-land-cover2012$ /en/products/corine-land-cover/clc-2012 permanent;
    # Small woody features redirects (ticket 292235)
    rewrite ^/en/products/high-resolution-layer-small-woody-features$ /en/products/high-resolution-layer-small-landscape-features permanent;
    rewrite ^/en/products/high-resolution-layer-small-woody-features/small-woody-features-2018$ /en/products/high-resolution-layer-small-landscape-features/small-woody-features-2018 permanent;
    rewrite ^/en/products/high-resolution-layer-small-woody-features/small-woody-features-2015$ /en/products/high-resolution-layer-small-landscape-features/small-woody-features-2015 permanent;
    # Impervious built-up redirects
    rewrite ^/en/products/high-resolution-layer-impervious-built-up$ /en/products/high-resolution-layer-imperviousness permanent;
    rewrite ^/en/products/high-resolution-layer-impervious-built-up/(.*)$ /en/products/high-resolution-layer-imperviousness permanent;
    # Product portfolio and misc
    rewrite ^/product-portfolio(.*)$ /en/products permanent;
    rewrite ^/sitemap$ /en/portal-sitemap permanent;
    rewrite ^/terms-of-use$ /en/faq#data_use_terms_and_conditions permanent;
    # User corner redirects
    rewrite ^/user-corner/contract-opportunities$ /en/work-opportunities permanent;
    rewrite ^/user-corner/events(.*)$ /en/events permanent;
    rewrite ^/user-corner/how-to-access-our-data$ /en/how-to-guides permanent;
    rewrite ^/user-corner/land-use-cases$ /en/use-cases permanent;
    rewrite ^/user-corner/partners$ /en/about-us?tab=who_we_are permanent;
    rewrite ^/user-corner/publications(.*)$ /en/news permanent;
    rewrite ^/user-corner/technical-library(.*)$ /en/technical-library permanent;
    rewrite ^/user-corner(.*)$ /en/technical-library permanent;
    # EU-DEM redirects (no longer disseminated)
    rewrite ^/en/products/eu-dem(.*)$ /en/products/products-that-are-no-longer-disseminated-on-the-clms-website permanent;
    # Forest and tree cover redirects
    rewrite ^/en/products/high-resolution-layer-tree-cover-density$ /en/products/high-resolution-layer-forests-and-tree-cover permanent;
    rewrite ^/en/products/high-resolution-layer-forest-type$ /en/products/high-resolution-layer-forests-and-tree-cover permanent;
    rewrite ^/en/products/high-resolution-layer-dominant-leaf-type$ /en/products/high-resolution-layer-forests-and-tree-cover permanent;
    rewrite ^/en/products/high-resolution-layer-tree-cover-density/(.*)$ /en/products/high-resolution-layer-forests-and-tree-cover permanent;
    rewrite ^/en/products/high-resolution-layer-forest-type/(.*)$ /en/products/high-resolution-layer-forests-and-tree-cover permanent;
    rewrite ^/en/products/high-resolution-layer-dominant-leaf-type/(.*)$ /en/products/high-resolution-layer-forests-and-tree-cover permanent;
    # Grassland redirects
    rewrite ^/en/products/high-resolution-layer-grassland$ /en/products/high-resolution-layer-grasslands permanent;
    rewrite ^/en/products/high-resolution-layer-grassland/grassland-2018$ /en/products/high-resolution-layer-grasslands/grassland-2018-raster-10-m-100-m-europe-yearly permanent;
    rewrite ^/en/products/high-resolution-layer-grassland/grassland-2015$ /en/products/high-resolution-layer-grasslands/grassland-2015 permanent;
    rewrite ^/en/products/high-resolution-layer-grassland/grassland-change-2015-2018$ /en/products/high-resolution-layer-grasslands/grassland-change-2015-2018 permanent;
    # Global products redirects
    rewrite ^/global/products/lc(.*)$ /en/products/global-dynamic-land-cover permanent;
    rewrite ^/global/products/ndvi(.*)$ /en/products/vegetation permanent;
    rewrite ^/global/products/lai(.*)$ /en/products/vegetation permanent;
    rewrite ^/global/products/fapar(.*)$ /en/products/vegetation permanent;
    rewrite ^/global/products/fcover(.*)$ /en/products/vegetation permanent;
    rewrite ^/global/products/dmp(.*)$ /en/products/vegetation permanent;
    rewrite ^/global/products/gdmp(.*)$ /en/products/vegetation permanent;
    rewrite ^/global/products/npp(.*)$ /en/products/vegetation permanent;
    rewrite ^/global/products/gpp(.*)$ /en/products/vegetation permanent;
    rewrite ^/global/products/ba(.*)$ /en/products/vegetation permanent;
    rewrite ^/global/products/ssm(.*)$ /en/products/soil-moisture permanent;
    rewrite ^/global/products/swi(.*)$ /en/products/soil-moisture permanent;
    rewrite ^/global/products/lst(.*)$ /en/products/temperature-and-reflectance permanent;
    rewrite ^/global/products/lswt(.*)$ /en/products/temperature-and-reflectance permanent;
    rewrite ^/global/products/sa(.*)$ /en/products/temperature-and-reflectance permanent;
    rewrite ^/global/products/tocr(.*)$ /en/products/temperature-and-reflectance permanent;
    rewrite ^/global/products/sce(.*)$ /en/products/snow permanent;
    rewrite ^/global/products/swe(.*)$ /en/products/snow permanent;
    rewrite ^/global/products/lie(.*)$ /en/products/water-bodies permanent;
    rewrite ^/global/products/lwq(.*)$ /en/products/water-bodies permanent;
    rewrite ^/global/products/wb(.*)$ /en/products/water-bodies permanent;
    rewrite ^/global/products/wl(.*)$ /en/products/water-bodies permanent;
    rewrite ^/global/use-cases(.*)$ /en/use-cases permanent;
    rewrite ^/global/gbov(.*)$ https://gbov.land.copernicus.eu/ permanent;
    rewrite ^/global/hsm(.*)$ https://hsm.land.copernicus.eu$1 permanent;
    rewrite ^/global$ /en/global permanent;
    rewrite ^/global/(.*)$ /en/global permanent;
    # Static content rewrites
    location = /content {
        return 301 /content/;
    }
    location ~ ^/content(.*)$ {
        rewrite ^/content(.*)$ /staticcontent$1 last;
    }

volto:
  serviceType: ClusterIP
  hostname: dev-clms.copernicus.01dev.eea.europa.eu
  replicaCount: 1
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 4
    targetCPUUtilizationPercentage: 80
  resources:
    limits:
      memory: 2Gi
    requests:
      memory: 2Gi
  environment:
    RAZZLE_API_PATH: ""
    RAZZLE_DEV_PROXY_API_PATH: ""
    RAZZLE_INTERNAL_API_PATH: http://backend:8080/Plone
    RAZZLE_BACKEND_NAME: 'eea.docker.plone.clms'
    RAZZLE_SENTRY_DSN: ""
    RAZZLE_SENTRY_RELEASE: ""
    RAZZLE_SENTRY_ENVIRONMENT: 01dev
    SENTRY_URL: https://sentry.eea.europa.eu
    SENTRY_AUTH_TOKEN: ""
    SENTRY_ORG: eea
    SENTRY_PROJECT: land-copernicus-eu
    RAZZLE_MATOMO_SITE_ID: ""
    RAZZLE_DEMO_SITE: "true"
    RAZZLE_PROXY_ES_DSN_clmsSearchTechnicalLibrary: ""
    RAZZLE_PROXY_QA_DSN_clmsSearchTechnicalLibrary: ""
    DANSWER_URL: ""
    DANSWER_API_KEY: ""
    DANSWER_PASSWORD: ""
    DANSWER_USERNAME: ""
    LLMGW_TOKEN: ""
    LLMGW_URL: ""
    VOLTO_ROBOTSTXT: ""
    RAZZLE_PUBLIC_URL: "https://dev-clms.copernicus.01dev.eea.europa.eu"
    CSP_HEADER: >-
      default-src 'none';
      base-uri 'self';
      form-action 'self';
      object-src 'none';
      manifest-src 'self'
      media-src https://land.copernicus.eu/;
      connect-src 'self' https://webanalytics.europa.eu https://*.eea.europa.eu https://europa.eu https://geocode.arcgis.com https://api.openaire.eu https://api.zotero.org https://cgls.vito.be;
      font-src 'self' data: https://cdnjs.cloudflare.com https://fonts.gstatic.com https://*.eea.europa.eu;
      frame-src 'self' https://europa.eu https://*.europa.eu https://*.eea.europa.eu https://eea.maps.arcgis.com https://cgls.vito.be;
      img-src https: blob: data:;
      script-src 'self' {nonce} blob: https://webanalytics.europa.eu https://matomo.eea.europa.eu https://europa.eu https://www.google.com https://www.gstatic.com https://spreadsheets.google.com https://docs.google.com https://*.eea.europa.eu https://d3js.org https://cdnjs.cloudflare.com https://code.jquery.com https://services.arcgis.com https://public.tableau.com;
      style-src 'self' 'unsafe-inline'  https://www.google.com https://europa.eu https://fonts.googleapis.com https://ajax.googleapis.com https://www.gstatic.com https://*.eea.europa.eu https://cdnjs.cloudflare.com https://code.jquery.com;
      frame-ancestors 'self' https://*.eea.europa.eu;
      report-to csp-endpoint;
      report-uri https://sentry.eea.europa.eu/api/45/security/?sentry_key=0343e20fc4e0469790b6016561f032e3;
  annotations: {}
  livenessProbe:
    httpGet:
      path: /ok
      port: http
    periodSeconds: 10
    timeoutSeconds: 10
    initialDelaySeconds: 30
    failureThreshold: 5
    successThreshold: 1
  startupProbe:
    httpGet:
      path: /ok
      port: http
    periodSeconds: 5
    timeoutSeconds: 10
    initialDelaySeconds: 10
    failureThreshold: 12
    successThreshold: 1
  readinessProbe:
    httpGet:
      path: /ok
      port: http
    periodSeconds: 15
    timeoutSeconds: 10
    initialDelaySeconds: 60
    failureThreshold: 4
    successThreshold: 2

service:
  type: ClusterIP
  port: 3000

varnish:
  serviceType: ClusterIP
  serviceName: frontend-varnish
  port: 3000
  backend: "frontend-volto"
  resources:
    limits:
      memory: 2Gi
    requests:
      memory: 2Gi
  nodeSelector: {}
  tolerations: []
  affinity: {}
  environment:
    VARNISH_SIZE: '2G'
    VARNISH_DNS_TTL: '20s'
    VARNISH_BERESP_TTL: '60s'
    VARNISH_BERESP_GRACE: '120s'
    VARNISH_BERESP_KEEP: '120s'
    VARNISH_GZIP_ENABLED: 'false'
    AUTOKILL_CRON: ''
  livenessProbe:
    httpGet:
      path: /ok
      port: http
    periodSeconds: 10
    timeoutSeconds: 10
    initialDelaySeconds: 30
    failureThreshold: 5
    successThreshold: 1
  startupProbe:
    httpGet:
      path: /ok
      port: http
    periodSeconds: 5
    timeoutSeconds: 10
    initialDelaySeconds: 10
    failureThreshold: 12
    successThreshold: 1

globalProxy:
  enabled: true

cdseProxy:
  enabled: true
  # CDSE proxy server snippet - contains nginx location blocks for CDSE service mappings
  # This can be configured in Rancher UI to keep sensitive service IDs out of the repo
  serverSnippet: ""

apache:
  enabled: true
  serviceType: ClusterIP
  serviceName: frontend-apache
  image:
    repository: eeacms/apache
    tag: "2.4-3.3"
  modules: "proxy_html_module xml2enc_module expires_module substitute_module"
  config: ""
  staticContent:
    enabled: false
    existingClaim: ""
  resources:
    limits:
      memory: 1Gi
    requests:
      memory: 1Gi
  nodeSelector: {}
  tolerations: []
  affinity: {}
  livenessProbe:
    tcpSocket:
      port: http
    periodSeconds: 10
    timeoutSeconds: 10
    initialDelaySeconds: 30
    failureThreshold: 5
    successThreshold: 1
  startupProbe:
    tcpSocket:
      port: http
    periodSeconds: 5
    timeoutSeconds: 10
    initialDelaySeconds: 10
    failureThreshold: 12
    successThreshold: 1

debug:
  serviceType: ClusterIP
  enabled: false
  resources:
    limits:
      memory: 4Gi
    requests:
      memory: 4Gi
  nodeSelector: {}
  tolerations: []
  affinity: {}
  podAnnotations: {}
  podSecurityContext: {}
  securityContext: {}
  environment: {}

resources: {}

nodeSelector: {}

tolerations: []

affinity: {}
