image:
  repository: eeacms/marine-backend
  tag: "6.0.15-18.demo.01"
  pullPolicy: Always

nameOverride: ""
fullnameOverride: ""

timezone: Europe/Copenhagen

# Data volumes configuration
volumes:
  data:
    name: "wise-marine-backend"
    driver: "rancher-nfs"
    external: true
    driverOpts: ""
  xml:
    name: "wise-xml"
    driver: "rancher-nfs"
    external: true
    driverOpts: ""
  cache:
    name: "wise-marine-cache"
    driver: "rancher-nfs"
    external: true
    driverOpts: ""

# ZEO Configuration
zeo:
  enabled: true
  replicaCount: 1
  resources:
    limits:
      memory: 4Gi
    requests:
      memory: 4Gi
  nodeSelector: {}
  tolerations: []
  affinity: {}

# Memcached Configuration
memcached:
  enabled: true
  replicaCount: 1
  image:
    repository: memcached
    tag: "1.6.20-alpine"
    pullPolicy: IfNotPresent
  args:
    - "-m"
    - "2048"
    - "-I"
    - "20m"
  resources:
    limits:
      memory: 1Gi
    requests:
      memory: 1Gi

# Plone Configuration
plone:
  enabled: true
  replicaCount: 1
  resources:
    limits:
      memory: 4Gi
    requests:
      memory: 4Gi
  environment:
    MARINE_PASS: ""
    MSFDURI: ""
    MSFD_DB_2018: ""
    MSFD_DB_DEFAULT: ""
    DEFAULT_PUBLISHER: "EEA"
    DEFAULT_ORGANISATIONS: ""
    STATIC_BANNER_ENABLED: "Yes"
    DYNAMIC_BANNER_ENABLED: "No"
    WARMUP_HEALTH_THRESHOLD: "10"
    XMLEXPORTPASS: ""
    SENTRY_DSN: ""
    SENTRY_SITE: ""
    SENTRY_URL: "water.europa.eu/marine"
    SENTRY_RELEASE: "6.0.15-18.demo.01"
    BACKEND_VERSION: "6.0.15-18.demo.01"
    PLONE_REGISTRY_YAML_CONTENT: ""

# Debug Instance Configuration
debug:
  enabled: false
  resources:
    limits:
      memory: 14Gi
    requests:
      memory: 2Gi

# HAProxy Configuration
haproxy:
  enabled: true
  replicaCount: 1
  image:
    repository: eeacms/haproxy
    tag: "2.0-1.0"
    pullPolicy: IfNotPresent
  resources:
    limits:
      memory: 128Mi
    requests:
      memory: 128Mi
  environment:
    STATS_AUTH: "admin:admin"
    FRONTEND_PORT: "8080"
    BACKENDS_PORT: "8080"
    BACKENDS: "plone"
    DNS_ENABLED: "true"
    INTER: "20s"
    DOWN_INTER: "5s"
    FAST_INTER: "15s"
    TIMEOUT_SERVER: "120s"
    TIMEOUT_CLIENT: "120s"
    HTTPCHK: "HEAD /haproxycheck"

# Varnish Configuration
varnish:
  enabled: true
  replicaCount: 1
  image:
    repository: eeacms/plone-varnish
    tag: "7.7-1.1-plone5"
    pullPolicy: IfNotPresent
  resources:
    limits:
      memory: 1Gi
    requests:
      memory: 1Gi
  environment:
    AUTOKILL_CRON: ""
    VARNISH_BACKEND: "haproxy"
    VARNISH_BACKEND_PORT: "8080"
    VARNISH_HTTP_PORT: "8080"
    VARNISH_SIZE: "1G"
    VARNISH_DNS_TTL: "20s"
    VARNISH_BERESP_TTL: "60s"
    VARNISH_BERESP_GRACE: "120s"
    VARNISH_BERESP_KEEP: "120s"
    VARNISH_GZIP_ENABLED: "false"
    VARNISH_GZIP_JSON_ENABLED: "false"

# Postfix Configuration
postfix:
  enabled: true
  debug: true  # Set to false for production
  image:
    repository: eaudeweb/mailtrap  # for debug
    tag: "2.3"
    pullPolicy: IfNotPresent
  productionImage:
    repository: eeacms/postfix  # for production
    tag: "3.5-1.1"
    pullPolicy: IfNotPresent
  resources:
    limits:
      memory: 256Mi
    requests:
      memory: 128Mi
  environment:
    MTP_HOST: ""
    MTP_RELAY: "ironports.eea.europa.eu"
    MTP_PORT: "8587"
    MTP_PASS: ""
    MTP_USER: ""

# Entrasync Configuration
entrasync:
  enabled: true
  schedule: "0 0 * * * *"
  resources:
    limits:
      memory: 4Gi
    requests:
      memory: 4Gi

# Host labels to avoid scheduling
hostLabels: "reserved=yes"