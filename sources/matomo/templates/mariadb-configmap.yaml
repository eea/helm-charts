apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-mariadb-global.cnf

data:
  global.cnf: |-
    [mysqld]
    # Connection & timeout settings
    max_allowed_packet = 128M
    wait_timeout = 999999
    interactive_timeout = 999999
    connect_timeout = 20
    net_read_timeout = 120
    net_write_timeout = 180
    
    # Connections & caches
    max_connections = 400
    table_open_cache = 800
    table_definition_cache = 800
    
    # InnoDB settings
    innodb_buffer_pool_size = 10G
    innodb_log_file_size = 1G
    innodb_flush_log_at_trx_commit = 2

    # Query cache (disabled â€“ correct for modern MariaDB)
    query_cache_size = 0
    query_cache_type = 0
