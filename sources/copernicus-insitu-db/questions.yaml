questions:
  - variable: "timezone"
    label: "Timezone"
    type: "string"
    default: "Europe/Copenhagen"
    required: true
    group: "General"

  - variable: "image.repository"
    label: "Image repository"
    type: "string"
    default: "eeacms/copernicus-insitu-db"
    group: "General"

  - variable: "image.tag"
    label: "Image tag"
    type: "string"
    default: "3.0.6"
    group: "General"

  - variable: "image.pullPolicy"
    label: "Image pull policy"
    type: "enum"
    options:
      - "IfNotPresent"
      - "Always"
      - "Never"
    default: "IfNotPresent"
    required: true
    group: "General"

  - variable: "links.database"
    label: "PostgreSQL service"
    description: "External PostgreSQL service, format SERVICE.NAMESPACE"
    type: "string"
    default: "plone-postgres.namespace"
    required: true
    group: "General"

  - variable: "ingress.enabled"
    label: "Enable ingress"
    type: "boolean"
    default: true
    required: true
    group: "Ingress"

  - variable: "ingress.className"
    label: "Ingress class"
    type: "string"
    default: "appsec-nginx"
    group: "Ingress"

  - variable: "ingress.host"
    label: "Ingress host"
    type: "string"
    default: "cis2.eea.europa.eu"
    required: true
    group: "Ingress"

  - variable: "ingress.tls"
    label: "Enable TLS"
    type: "boolean"
    default: false
    required: true
    group: "Ingress"

  - variable: "ingress.certificate"
    label: "TLS certificate secret"
    type: "string"
    default: ""
    group: "Ingress"

  - variable: "secrets.create"
    label: "Create secret from values"
    type: "boolean"
    default: false
    required: true
    group: "General"

  - variable: "secrets.existingSecret"
    label: "Existing secret name"
    type: "string"
    default: ""
    group: "General"

  - variable: "secrets.data.ELASTICSEARCH_AUTH"
    label: "Secret: ELASTICSEARCH_AUTH"
    type: "string"
    default: ""
    group: "General"

  - variable: "secrets.data.POSTGRES_PASSWORD"
    label: "Secret: POSTGRES_PASSWORD"
    type: "string"
    default: ""
    group: "General"

  - variable: "secrets.data.PGPASSWORD"
    label: "Secret: PGPASSWORD"
    type: "string"
    default: ""
    group: "General"

  - variable: "secrets.data.SECRET_KEY"
    label: "Secret: SECRET_KEY"
    type: "string"
    default: ""
    group: "General"

  - variable: "secrets.data.SENTRY_AUTH_TOKEN"
    label: "Secret: SENTRY_AUTH_TOKEN"
    type: "string"
    default: ""
    group: "General"

  - variable: "secrets.data.SENTRY_DSN"
    label: "Secret: SENTRY_DSN"
    type: "string"
    default: ""
    group: "General"

  - variable: "secrets.data.POSTGRES_EXPLORER_PASSWORD"
    label: "Secret: POSTGRES_EXPLORER_PASSWORD"
    type: "string"
    default: ""
    group: "General"

  - variable: "secrets.data.dianaboiangiu"
    label: "Secret: dianaboiangiu"
    type: "string"
    default: ""
    group: "General"

  - variable: "secrets.data.API_PREFIX"
    label: "Secret: API_PREFIX"
    type: "string"
    default: ""
    group: "General"

  - variable: "secrets.data.API_TOKEN"
    label: "Secret: API_TOKEN"
    type: "string"
    default: ""
    group: "General"

  - variable: "persistence.staticfiles.enabled"
    label: "Enable staticfiles PVC"
    type: "boolean"
    default: true
    required: true
    group: "Storage"

  - variable: "persistence.staticfiles.existingClaim"
    label: "Staticfiles existing claim"
    type: "string"
    default: ""
    group: "Storage"

  - variable: "persistence.staticfiles.storageClassName"
    label: "Staticfiles storage class"
    type: "string"
    default: ""
    group: "Storage"

  - variable: "persistence.staticfiles.size"
    label: "Staticfiles size"
    type: "string"
    default: "10Gi"
    group: "Storage"

  - variable: "persistence.logging.enabled"
    label: "Enable logging PVC"
    type: "boolean"
    default: true
    required: true
    group: "Storage"

  - variable: "persistence.logging.existingClaim"
    label: "Logging existing claim"
    type: "string"
    default: ""
    group: "Storage"

  - variable: "persistence.logging.storageClassName"
    label: "Logging storage class"
    type: "string"
    default: ""
    group: "Storage"

  - variable: "persistence.logging.size"
    label: "Logging size"
    type: "string"
    default: "5Gi"
    group: "Storage"

  - variable: "web.replicaCount"
    label: "Web replicas"
    type: "int"
    default: 2
    required: true
    group: "Web"

  - variable: "web.service.type"
    label: "Web service type"
    type: "enum"
    options:
      - "ClusterIP"
      - "NodePort"
      - "LoadBalancer"
    default: "ClusterIP"
    required: true
    group: "Web"

  - variable: "web.service.port"
    label: "Web service port"
    type: "int"
    default: 8000
    required: true
    group: "Web"

  - variable: "web.resources.requests.memory"
    label: "Web memory request"
    type: "string"
    default: "1Gi"
    group: "Web"

  - variable: "web.resources.limits.memory"
    label: "Web memory limit"
    type: "string"
    default: "2Gi"
    group: "Web"

  - variable: "commonEnv.ALLOWED_HOSTS"
    label: "Common env: ALLOWED_HOSTS"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.DEFAULT_FROM_EMAIL"
    label: "Common env: DEFAULT_FROM_EMAIL"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.DJANGO_COLLECT_STATIC"
    label: "Common env: DJANGO_COLLECT_STATIC"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.DJANGO_INDEX_CONTENT"
    label: "Common env: DJANGO_INDEX_CONTENT"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.DJANGO_MIGRATE"
    label: "Common env: DJANGO_MIGRATE"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.ELASTICSEARCH_HOST"
    label: "Common env: ELASTICSEARCH_HOST"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.EMAIL_BACKEND"
    label: "Common env: EMAIL_BACKEND"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.EMAIL_PORT"
    label: "Common env: EMAIL_PORT"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.MATOMO"
    label: "Common env: MATOMO"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.POSTGRES_DB"
    label: "Common env: POSTGRES_DB"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.POSTGRES_USER"
    label: "Common env: POSTGRES_USER"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.SENTRY_API_URL"
    label: "Common env: SENTRY_API_URL"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.SENTRY_TAG_ENVIRONMENT"
    label: "Common env: SENTRY_TAG_ENVIRONMENT"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.SENTRY_TAG_RELEASE"
    label: "Common env: SENTRY_TAG_RELEASE"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.SENTRY_TAG_SITE"
    label: "Common env: SENTRY_TAG_SITE"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.SITE_URL"
    label: "Common env: SITE_URL"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.SUPPORT_EMAIL"
    label: "Common env: SUPPORT_EMAIL"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.TIMEOUT"
    label: "Common env: TIMEOUT"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.UWSGI_PORT"
    label: "Common env: UWSGI_PORT"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.POSTGRES_EXPLORER_USER"
    label: "Common env: POSTGRES_EXPLORER_USER"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.EXCLUDE_REPORTS_IDS"
    label: "Common env: EXCLUDE_REPORTS_IDS"
    type: "string"
    default: ""
    group: "General"

  - variable: "commonEnv.PUBLIC_REPORTS_IDS"
    label: "Common env: PUBLIC_REPORTS_IDS"
    type: "string"
    default: ""
    group: "General"

  - variable: "web.env.LOGSPOUT"
    label: "Web env: LOGSPOUT"
    type: "string"
    default: ""
    group: "Web"

  - variable: "web.env.API_PREFIX"
    label: "Web env: API_PREFIX"
    type: "string"
    default: ""
    group: "Web"

  - variable: "web.env.dianaboiangiu"
    label: "Web env: dianaboiangiu"
    type: "string"
    default: ""
    group: "Web"

  - variable: "cron.replicaCount"
    label: "Cron replicas"
    type: "int"
    default: 1
    required: true
    group: "Cron"

  - variable: "cron.resources.requests.memory"
    label: "Cron memory request"
    type: "string"
    default: "512Mi"
    group: "Cron"

  - variable: "cron.resources.limits.memory"
    label: "Cron memory limit"
    type: "string"
    default: "1Gi"
    group: "Cron"

  - variable: "cron.env.DEBUG"
    label: "Cron env: DEBUG"
    type: "string"
    default: ""
    group: "Cron"

  - variable: "cron.env.ELASTICSEARCH_TIMEOUT"
    label: "Cron env: ELASTICSEARCH_TIMEOUT"
    type: "string"
    default: ""
    group: "Cron"

  - variable: "cron.env.API_TOKEN"
    label: "Cron env: API_TOKEN"
    type: "string"
    default: ""
    group: "Cron"

  - variable: "backupdb.enabled"
    label: "Enable database backup CronJob"
    type: "boolean"
    default: true
    required: true
    group: "Backup"

  - variable: "backupdb.image.repository"
    label: "Backup image repository"
    type: "string"
    default: "postgres"
    required: true
    group: "Backup"

  - variable: "backupdb.image.tag"
    label: "Backup image tag"
    type: "string"
    default: "13-buster"
    required: true
    group: "Backup"

  - variable: "backupdb.image.pullPolicy"
    label: "Backup pull policy"
    type: "enum"
    options:
      - "IfNotPresent"
      - "Always"
      - "Never"
    default: "IfNotPresent"
    required: true
    group: "Backup"

  - variable: "backupdb.schedule"
    label: "Backup schedule"
    description: "Cron format"
    type: "string"
    default: "0 0 * * 0"
    required: true
    group: "Backup"

  - variable: "backupdb.successfulJobsHistoryLimit"
    label: "Backup successful jobs history"
    type: "int"
    default: 3
    group: "Backup"

  - variable: "backupdb.failedJobsHistoryLimit"
    label: "Backup failed jobs history"
    type: "int"
    default: 3
    group: "Backup"

  - variable: "backupdb.resources.requests.memory"
    label: "Backup memory request"
    type: "string"
    default: "64Mi"
    group: "Backup"

  - variable: "backupdb.resources.limits.memory"
    label: "Backup memory limit"
    type: "string"
    default: "512Mi"
    group: "Backup"

  - variable: "backupdb.command"
    label: "Backup command"
    type: "string"
    default: "mkdir -p /var/local/static/protected && pg_dump --no-owner --exclude-table=public.explorer_* --inserts -h $POSTGRES_HOST -U $POSTGRES_USER $POSTGRES_DB | gzip > /var/local/static/protected/database.sql.gz"
    group: "Backup"

  - variable: "backupdb.env.POSTGRES_DB"
    label: "Backup env: POSTGRES_DB"
    type: "string"
    default: ""
    group: "Backup"

  - variable: "backupdb.env.POSTGRES_USER"
    label: "Backup env: POSTGRES_USER"
    type: "string"
    default: ""
    group: "Backup"

  - variable: "postfix.serviceName"
    label: "Postfix service name"
    description: "Default is application full name ( application-postfix ) "
    default: ""
    type: "string"
    group: "Mail"

  - variable: "postfix.dryrun"
    label: "Run in development mode"
    description: "If checked, will not send emails, but use mailtrap to catch them"
    default: false
    type: "boolean"
    required: true
    show_subquestion_if: false
    group: "Mail"
    subquestions:
      - variable: "postfix.mtpRelay"
        label: "Postfix relay"
        required: true
        description: "Postfix SMTP relay"
        type: "string"
        default: "ironports.eea.europa.eu"
      - variable: "postfix.mtpPort"
        label: "Postfix relay port"
        description: "Postfix SMTP relay port"
        type: "int"
        required: true
        default: 8587
      - variable: "postfix.mtpUser"
        label: "Postfix user"
        description: "Without authentication, emails will not be sent"
        type: "string"
        required: true
      - variable: "postfix.mtpPass"
        label: "Postfix password"
        description: "Without authentication, emails will not be sent"
        type: "string"
        required: true
      - variable: "postfix.serverName"
        label: "Application url"
        type: "string"
        required: true

  - variable: "postfix.mailtrap.httpenabled"
    label: "Create mailtrap service for port 80"
    description: "Keep unchecked if you don't want to view the emails in a webinterface"
    type: "boolean"
    default: false
    required: true
    show_if: "postfix.dryrun"
    show_subquestion_if: true
    group: "Mail"
    subquestions:
      - variable: "postfix.mailtrap.serviceType"
        label: "Mailtrap service type"
        description: "Select NodePort to expose mailtrap on port"
        type: "enum"
        options:
          - "NodePort"
          - "ClusterIP"
        default: "ClusterIP"
        required: true
      - variable: "postfix.mailtrap.ingress.enabled"
        label: "Add mailtrap url in ingress"
        default: false
        type: "boolean"
        required: true
      - variable: "postfix.mailtrap.mtUser"
        label: "Mailtrap webui user"
        default: "mailtrap"
        type: "string"
      - variable: "postfix.mailtrap.mtPasswd"
        label: "Mailtrap webui password"
        default: "mailtrap"
        type: "string"

  - variable: "postfix.mailtrap.ingress.hostname"
    label: "Mailtrap URL"
    show_if: "postfix.mailtrap.ingress.enabled"
    required: true
    type: "string"
    default: "mailtrap.01dev.eea.europa.eu"
    group: "Mail"

  - variable: "postfix.mailtrap.ingress.certificate"
    label: "Mailtrap certificate name"
    show_if: "postfix.mailtrap.ingress.enabled"
    description: "If empty, https will not be enabled"
    default: "mailtrap.01dev.eea.europa.eu-tls"
    group: "Mail"

  - variable: "webserver.replicaCount"
    label: "Webserver replicas"
    type: "int"
    default: 1
    required: true
    group: "Webserver"

  - variable: "webserver.image.repository"
    label: "Webserver image repository"
    type: "string"
    default: "nginx"
    required: true
    group: "Webserver"

  - variable: "webserver.image.tag"
    label: "Webserver image tag"
    type: "string"
    default: "alpine"
    required: true
    group: "Webserver"

  - variable: "webserver.image.pullPolicy"
    label: "Webserver pull policy"
    type: "enum"
    options:
      - "IfNotPresent"
      - "Always"
      - "Never"
    default: "IfNotPresent"
    required: true
    group: "Webserver"

  - variable: "webserver.service.type"
    label: "Webserver service type"
    type: "enum"
    options:
      - "ClusterIP"
      - "NodePort"
      - "LoadBalancer"
    default: "ClusterIP"
    required: true
    group: "Webserver"

  - variable: "webserver.service.port"
    label: "Webserver service port"
    type: "int"
    default: 80
    required: true
    group: "Webserver"

  - variable: "webserver.resources.requests.memory"
    label: "Webserver memory request"
    type: "string"
    default: "64Mi"
    group: "Webserver"

  - variable: "webserver.resources.limits.memory"
    label: "Webserver memory limit"
    type: "string"
    default: "128Mi"
    group: "Webserver"
